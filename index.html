<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TuneHub 音乐播放器 - 在线听歌</title>
    <meta name="description" content="TuneHub 是一个功能强大的在线音乐播放器，支持网易云音乐、酷我音乐、QQ音乐等多平台搜索播放。">
    <meta name="keywords" content="音乐播放器,在线听歌,网易云音乐,酷我音乐,QQ音乐,TuneHub">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎵</text></svg>">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-controls">
                <h1>TuneHub 音乐播放器</h1>
                <div class="header-buttons">
                    <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()">
                        <span id="themeIcon">🌙</span>
                    </button>
                </div>
            </div>
            <p>搜索 · 播放 · 下载</p>
            <div class="play-modes">
                <select id="playModeSelect" onchange="changePlayMode()">
                    <option value="normal">顺序播放</option>
                    <option value="single">单曲循环</option>
                    <option value="loop">列表循环</option>
                    <option value="shuffle">随机播放</option>
                </select>
            </div>
        </div>

        <div class="main-container">
            <!-- 左侧：搜索和列表 -->
            <div class="left-panel">
                <div class="search-panel">
                    <h2>搜索音乐</h2>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="输入歌曲名称或歌手...">
                        <select id="platformSelect">
                            <option value="netease">网易云音乐</option>
                            <option value="kuwo">酷我音乐</option>
                            <option value="qq">QQ音乐</option>
                            <option value="aggregateSearch">聚合搜索</option>
                        </select>
                        <select id="qualitySelect">
                            <option value="320k">高品质 320k</option>
                            <option value="128k">标准 128k</option>
                            <option value="flac">无损 FLAC</option>
                            <option value="flac24bit">Hi-Res FLAC 24bit</option>
                        </select>
                        <button class="search-btn" onclick="searchMusic()">搜索</button>
                    </div>
                    <div id="songList" class="song-list">
                        <div class="song-list-title">请搜索您想听的歌曲</div>
                    </div>
                </div>
            </div>

            <!-- 右侧：播放器和歌词 -->
            <div class="right-panel">
                <!-- 可视化容器 -->
                <div class="visualizer-container">
                    <canvas class="visualizer" id="visualizer"></canvas>
                </div>


                <div class="player-panel" id="playerPanel">
                    <div class="now-playing-section">
                        <div class="album-cover-container">
                            <div class="album-cover" id="albumCover">
                                <div class="placeholder">🎵</div>
                            </div>
                        </div>
                        <div class="song-details">
                            <h2 id="currentSongName">未播放</h2>
                            <p id="currentArtist">-</p>
                            <p id="currentAlbum">-</p>
                        </div>
                        <div class="progress-section">
                            <div class="progress-bar" onclick="seekTo(event)">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <div class="time-info">
                                <span id="currentTime">0:00</span>
                                <span id="duration">0:00</span>
                            </div>
                        </div>
                        <div class="controls">
                            <button class="control-btn" onclick="previousSong()">⏮</button>
                            <button class="control-btn play-btn" onclick="togglePlay()" id="playBtn">▶</button>
                            <button class="control-btn" onclick="nextSong()">⏭</button>
                        </div>
                        <div class="quality-section">
                            <span class="quality-label" id="currentQuality">当前音质: 高品质 320k</span>
                            <select id="qualityChange" class="quality-select" onchange="changeQuality()">
                                <option value="320k">高品质 320k</option>
                                <option value="128k">标准 128k</option>
                                <option value="flac">无损 FLAC</option>
                                <option value="flac24bit">Hi-Res FLAC 24bit</option>
                            </select>
                            <span id="qualityStatus" class="quality-status" style="display: none;">⚡ 切换中</span>
                        </div>
                        <div class="volume-section">
                            <span class="volume-label">音量</span>
                            <input type="range" id="volumeSlider" min="0" max="100" value="80" class="volume-slider" onchange="changeVolume()">
                            <span id="volumeValue" class="volume-value">80%</span>
                        </div>
                        <div class="playlist-add-section" style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 25px; padding: 12px; background: rgba(0, 0, 0, 0.03); border-radius: 12px;">
                            <span class="playlist-label" style="font-size: 13px; color: #888;">歌单操作</span>
                            <button class="playlist-add-btn" onclick="addCurrentSongToPlaylist()" style="padding: 10px 20px; border: none; border-radius: 8px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; cursor: pointer; font-size: 13px; transition: all 0.3s; display: flex; align-items: center; gap: 6px;">
                                <span style="font-size: 16px;">📝</span> 添加到歌单
                            </button>
                        </div>
                        <div class="download-section">
                            <button class="download-btn btn-download-all" onclick="downloadAll()">
                                <span>📦</span> 下载全部
                            </button>
                            <button class="download-btn btn-download-audio" onclick="downloadAudioAndLyrics()">
                                <span>🎵📝</span> 歌曲+歌词
                            </button>
                            <button class="download-btn btn-download-audio" onclick="downloadCurrentQualityAudio()">
                                <span>⚡</span> 下载当前音质
                            </button>
                            <button class="download-btn btn-download-lyrics" onclick="downloadLyrics()">
                                <span>📝</span> 歌词
                            </button>
                            <button class="download-btn btn-download-cover" onclick="downloadCover()">
                                <span>🖼️</span> 封面
                            </button>
                        </div>
                    </div>

                    <div class="lyrics-panel" style="margin-top: 30px;">
                        <div class="lyrics-header">
                            <h3>歌词</h3>
                        </div>
                        <div id="lyricsContent" class="lyrics-content">
                            <div style="text-align: center; color: #666; padding: 40px;">
                                选择歌曲后显示歌词
                            </div>
                        </div>
                    </div>

                    <!-- 歌单管理 -->
                    <div class="playlist-section" style="margin-top: 30px;">
                        <h3>📝 我的歌单</h3>
                        <p style="font-size: 12px; color: #888; margin-bottom: 10px;">
                            💡 使用方法：① 创建歌单 → ② 点击选择 → ③ 播放歌曲 → ④ 点击播放器上的「📝 添加到歌单」按钮
                        </p>
                        <div class="playlist-controls">
                            <input type="text" id="playlistNameInput" placeholder="输入歌单名称...">
                            <button class="playlist-btn" onclick="createPlaylist()">创建歌单</button>
                        </div>
                        <div id="playlistList" class="playlist-list">
                            <!-- 歌单列表将在这里动态生成 -->
                        </div>
                        <div id="currentPlaylistStatus" style="margin-top: 10px; font-size: 12px; color: #667eea;">
                            📌 当前未选择歌单（点击下方歌单进行选择）
                        </div>
                    </div>

                    <!-- 统计信息 -->
                    <div class="stats-section" style="margin-top: 30px;">
                        <h3>播放统计</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="totalPlayCount">0</div>
                                <div class="stat-label">总播放次数</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="todayPlayCount">0</div>
                                <div class="stat-label">今日播放</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalPlayTime">0</div>
                                <div class="stat-label">总时长（分）</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="favoriteCount">0</div>
                                <div class="stat-label">最爱歌曲</div>
                            </div>
                        </div>
                    </div>

                    <!-- 推荐歌曲 -->
                    <div class="recommendations-section" style="margin-top: 30px;">
                        <h3>推荐算法</h3>
                        <div id="recommendationsList">
                            <div class="recommendation-item" onclick="loadRecommendation(this)">
                                <div class="recommendation-cover">🎵</div>
                                <div class="recommendation-info">
                                    <div class="recommendation-name">推荐将根据您的播放历史生成</div>
                                    <div class="recommendation-artist">播放更多歌曲以获取个性化推荐</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 数据管理 -->
                    <div class="data-controls" style="margin-top: 30px;">
                        <button class="data-btn btn-export" onclick="exportData()">导出数据</button>
                        <button class="data-btn btn-import" onclick="document.getElementById('importFile').click()">导入数据</button>
                        <button class="data-btn btn-backup" onclick="backupData()">备份数据</button>
                        <button class="data-btn btn-clear" onclick="clearAllData()">清空数据</button>
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/player.js"></script>

    <!-- 页脚信息 -->
    <footer style="text-align: center; padding: 20px; margin-top: 40px; color: #888; font-size: 12px;">
        <p>🎵 TuneHub 音乐播放器 V2.0</p>
        <p>支持网易云音乐、酷我音乐、QQ音乐等多平台搜索播放</p>
        <p style="margin-top: 10px;">
            <a href="https://github.com/bet-io/music-player" target="_blank" style="color: #667eea; text-decoration: none;">GitHub</a>
            <span style="margin: 0 10px;">|</span>
            <a href="README.md" target="_blank" style="color: #667eea; text-decoration: none;">使用说明</a>
            <span style="margin: 0 10px;">|</span>
            <span id="versionInfo">V2.0</span>
        </p>
    </footer>
</body>
</html>